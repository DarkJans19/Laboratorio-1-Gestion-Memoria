<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulación gestión de memoria</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1 class="titulo">Simulación gestión de memoria</h1>
  
  <div class="contenedor">
    <div class="menu">
      <button id="btn-particion">Partición</button>
      <button id="btn-algoritmo">Algoritmo</button>
      <button id="btn-procesos-predeterminados">Procesos Predefinidos</button>
      <button id="btn-anadir-proceso">Añadir Proceso</button>
      <button id="btn-eliminar-proceso">Eliminar Proceso</button>
      <button id="btn-ver-tablas">Ver Tablas de Procesos</button>
    </div>

    <div class="memoria">
      <div class="memoria-contenido">
        <div class="info-eleccion">
          <ul>
            <li id="tipo-particion">Partición: —</li>
            <li id="tipo-algoritmo">Algoritmo: —</li>
            <li id="lista-procesos">Procesos: —</li>
          </ul>
        </div>

        <div class="memoria-contenedor">
          <div class="etiquetas-memoria"></div>
          <div class="memoria-box"></div>
          <div class="etiquetas-hex"></div>
        </div>
      </div>
    </div>
  </div>

  <button id="btn-reiniciar">Reiniciar</button>

  <div id="menu-particion" class="ventana-oculta">
    <div class="ventana-contenido">
      <h2>Elegir tipo de partición</h2>
      <ul>
        <li><button id="btn-particion-fija">Estática de tamaño fijo</button></li>
        <li><button id="btn-particion-variable">Estática de tamaño variable</button></li>
        <li><button id="btn-particion-dinamica-sin">Dinámica (sin compactación)</button></li>
        <li><button id="btn-particion-dinamica-con">Dinámica (con compactación)</button></li>
        <li><button id="btn-particion-segmentada">Segmentación Pura</button></li>
      </ul>
      <button id="cerrar-particion">Cerrar</button>
    </div>
  </div>

  <div id="menu-algoritmo" class="ventana-oculta">
    <div class="ventana-contenido">
      <h2>Elegir algoritmo de asignación</h2>
      <ul>
        <li><button id="btn-primer-ajuste">Primer ajuste</button></li>
        <li><button id="btn-mejor-ajuste">Mejor ajuste</button></li>
        <li><button id="btn-peor-ajuste">Peor ajuste</button></li>
      </ul>
      <button id="cerrar-algoritmo">Cerrar</button>
    </div>
  </div>

  <div id="menu-procesos" class="ventana-oculta">
    <div class="ventana-contenido">
      <h2>Seleccionar Proceso Predefinido</h2>
      <ul>
        <!-- Aquí se crean los botones dinamicamente -->
      </ul>
      <button id="cerrar-proceso">Cerrar</button>
    </div>
  </div>

<div id="ventana-segmentos" class="ventana-modal" style="display:none;">
  <div class="ventana-contenido">
    <h2 id="titulo-segmentos">Segmentos</h2>
    <div id="lista-segmentos"></div>
    <button id="guardar-segmentos">Guardar</button>
    <button onclick="document.getElementById('ventana-segmentos').style.display='none'">Cerrar</button>
  </div>
</div>

<!-- NUEVA ventana para editar segmentos -->
<div id="ventana-segmentos" class="ventana" style="display:none;">
  <div class="ventana-contenido">
    <h2>Editar Segmentos de <span id="nombre-proceso"></span></h2>
    <form id="form-segmentos"></form>
    <button id="guardar-segmentos">Guardar</button>
    <button id="cerrar-segmentos">Cerrar</button>
  </div>
</div>
  <div id="menu-anadirproceso" class="ventana-oculta">
    <div class="ventana-contenido">
      <h2>Añadir nuevo proceso</h2>
      <form id="form-anadir-proceso">
        <label for="nombre-proceso">Nombre del proceso:</label><br>
        <input type="text" id="nombre-proceso"><br><br>
        <label for="tamano-proceso">Tamaño (KiB):</label><br>
        <input type="number" id="tamano-proceso"><br><br>
        <button id="btn-agregar-proceso" type="button">Agregar</button>
      </form>
      <button id="cerrar-anadir">Cerrar</button>
    </div>
  </div>

  <div id="menu-eliminar-proceso" class="ventana-oculta">
    <div class="ventana-contenido">
      <h2>Eliminar proceso</h2>
      <form id="form-eliminar-proceso">
        <label for="proceso-eliminar">Seleccione proceso:</label><br>
        <select id="proceso-eliminar">
          <option value="P1">P1</option>
          <option value="P2">P2</option>
          <option value="P3">P3</option>
        </select><br><br>
        <button id="btn-eliminar-proceso-form" type="button">Eliminar</button>
      </form>
      <button id="cerrar-eliminar">Cerrar</button>
    </div>
  </div>

  <!-- Añade esto antes del cierre </body> -->
  <div id="ventana-tablas-procesos" class="ventana-modal" style="display:none;">
    <div class="ventana-contenido" style="width: 600px; max-height: 80vh; overflow-y: auto;">
      <h2>Tablas de Segmentos de Procesos</h2>
      
      <!-- Selector de proceso -->
      <div style="margin-bottom: 20px;">
        <label for="selector-proceso-tabla">Seleccionar proceso:</label>
        <select id="selector-proceso-tabla" style="margin-left: 10px; padding: 5px;">
          <option value="">-- Selecciona un proceso --</option>
        </select>
      </div>
      
      <!-- Información general del proceso -->
      <div id="info-proceso-tabla" style="background: #f5f5f5; padding: 10px; border-radius: 5px; margin-bottom: 15px; display: none;">
        <h3 id="nombre-proceso-tabla"></h3>
        <p><strong>PID:</strong> <span id="pid-proceso-tabla"></span></p>
        <p><strong>Tamaño total:</strong> <span id="tamano-proceso-tabla"></span> KiB</p>
      </div>
      
      <!-- Tabla de segmentos -->
      <div id="contenedor-tabla-segmentos" style="display: none;">
        <h4>Tabla de Segmentos</h4>
        <table id="tabla-segmentos" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
          <thead>
            <tr style="background: #b10909; color: white;">
              <th style="padding: 8px; border: 1px solid #ddd;">ID</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Nombre</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Tamaño (KiB)</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Dirección Base</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Dirección Física</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Permisos</th>
              <th style="padding: 8px; border: 1px solid #ddd;">Estado</th>
            </tr>
          </thead>
          <tbody id="cuerpo-tabla-segmentos">
            <!-- Se llena dinámicamente -->
          </tbody>
        </table>
      </div>
      
      <!-- Mapa de memoria del proceso -->
      <div id="mapa-memoria-proceso" style="margin-top: 20px; display: none;">
        <h4>Mapa de Memoria del Proceso</h4>
        <div id="visualizacion-memoria-proceso" style="border: 2px solid #333; background: #fff; min-height: 200px; padding: 10px;">
          <!-- Visualización específica del proceso -->
        </div>
      </div>
      
      <button onclick="document.getElementById('ventana-tablas-procesos').style.display='none'" style="margin-top: 20px;">Cerrar</button>
    </div>
  </div>

  <script type="module" src="Particion/Particion.js"></script>
  <script type="module" src="Proceso/Proceso.js"></script>
  <script type="module" src="Algoritmos/EstrategiaAlgoritmo.js"></script>
  <script type="module" src="Algoritmos/PrimerAjuste.js"></script>
  <script type="module" src="Algoritmos/MejorAjuste.js"></script>
  <script type="module" src="Algoritmos/PeorAjuste.js"></script>
  <script type="module" src="Memoria/Memoria.js"></script>
  <script type="module" src="Memoria/MemoriaEstaticaFija.js"></script>
  <script type="module" src="Memoria/MemoriaEstaticaVariable.js"></script>
  <script type="module" src="Memoria/MemoriaDinamicaSinCompactacion.js"></script>
  <script type="module" src="Memoria/MemoriaDinamicaConCompactacion.js"></script>
  <script type="module" src="Memoria/MemoriaSegmentada.js"></script>
  <script src = "Constantes.js"></script>
  <script type="module" src="Main.js"></script>
  <script src="Dom-References.js"></script>

</body>
</html>
